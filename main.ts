// //% color="#006400" weight=50 icon="\uf1b9" block="呼噜猫游戏机大屏"
// namespace HuLuMaoGame {
//     export let asc16=[
//         0x00000000,0x00000000,0x00000000,0x00000000 ,//" "
//         0x00101010,0x10101010,0x10100000,0x10100000 ,//"!"
//         0x00006C6C,0x24240000,0x00000100,0x00000000 ,//"""
//         0x00242424,0x24FE4848,0x4848FC90,0x90909000 ,//"#"
//         0x00103C54,0x92905038,0x14121292,0x54781000 ,//"$"
//         0x0000225C,0x94A84810,0x10242A52,0x54880000 ,//"%"
//         0x00003048,0x4850206E,0x54948C88,0x8A740000 ,//"&"
//         0x00003030,0x10100000,0x00000000,0x00000000 ,//"'"
//         0x00040810,0x10202020,0x20202010,0x10080400 ,//"("
//         0x00804020,0x20101010,0x10101020,0x20408000 ,//")"
//         0x00000000,0x10543810,0x38541000,0x00000000 ,//"*"
//         0x00000010,0x101010FE,0x10101010,0x00000000 ,//"+"
//         0x00000000,0x00000000,0x00000000,0x10102000 ,//" "
//         0x00000000,0x000000FE,0x00000000,0x00000000 ,//"-"
//         0x00000000,0x00000000,0x00000000,0x10100000 ,//"."
//         0x00000404,0x08081010,0x20204040,0x80800000 ,//"/"
//         0x00003844,0x82828282,0x82828282,0x44380000 ,//"0"
//         0x00001070,0x10101010,0x10101010,0x107C0000 ,//"1"
//         0x00003844,0x82820408,0x10204082,0x84FC0000 ,//"2"
//         0x00003844,0x82020438,0x04020282,0x44380000 ,//"3"
//         0x0000040C,0x14142424,0x4444FE04,0x040E0000 ,//"4"
//         0x0000FC80,0x8080B8C4,0x82020282,0x84780000 ,//"5"
//         0x00003C42,0x8280B8C4,0x82828282,0x44380000 ,//"6"
//         0x00007E42,0x82040408,0x08081010,0x10100000 ,//"7"
//         0x00003844,0x82824438,0x44828282,0x44380000 ,//"8"
//         0x00003844,0x82828282,0x463A0282,0x44380000 ,//"9"
//         0x00000000,0x10100000,0x00001010,0x00000000 ,//":"
//         0x00000000,0x10100000,0x00000010,0x10200000 ,//";"
//         0x00000000,0x06186080,0x60180600,0x00000000 ,//"<"
//         0x00000000,0x0000FE00,0x00FE0000,0x00000000 ,//"="
//         0x00000000,0xC0300C02,0x0C30C000,0x00000000 ,//">"
//         0x00384482,0x82020408,0x10101000,0x10100000 ,//"?"
//         0x00003844,0x829AAAAA,0xAAAAAA96,0x80423C00 ,//"@"
//         0x00001010,0x10282828,0x44447C44,0x44EE0000 ,//"A"
//         0x0000FC42,0x4242427C,0x42424242,0x42FC0000 ,//"B"
//         0x00003C44,0x82808080,0x80808282,0x44380000 ,//"C"
//         0x0000F844,0x42424242,0x42424242,0x44F80000 ,//"D"
//         0x0000FC44,0x4240447C,0x44404042,0x44FC0000 ,//"E"
//         0x0000FC44,0x4240447C,0x44404040,0x40F00000 ,//"F"
//         0x0000344C,0x82808080,0x8E848484,0x4C340000 ,//"G"
//         0x0000EE44,0x4444447C,0x44444444,0x44EE0000 ,//"H"
//         0x00007C10,0x10101010,0x10101010,0x107C0000 ,//"I"
//         0x00003E08,0x08080808,0x08080888,0x88700000 ,//"J"
//         0x0000EE44,0x48485060,0x50484844,0x44EE0000 ,//"K"
//         0x0000E040,0x40404040,0x40404042,0x44FC0000 ,//"L"
//         0x0000C644,0x6C6C6C54,0x54544444,0x44EE0000 ,//"M"
//         0x0000CE44,0x64646454,0x544C4C4C,0x44E40000 ,//"N"
//         0x00003844,0x82828282,0x82828282,0x44380000 ,//"O"
//         0x0000F844,0x42424244,0x78404040,0x40E00000 ,//"P"
//         0x00003844,0x82828282,0x828282BA,0x443C0200 ,//"Q"
//         0x0000F048,0x44444448,0x70484444,0x44E60000 ,//"R"
//         0x00003C44,0x82804030,0x0C020282,0x44780000 ,//"S"
//         0x00007C54,0x92101010,0x10101010,0x10380000 ,//"T"
//         0x0000EE44,0x44444444,0x44444444,0x44380000 ,//"U"
//         0x0000EE44,0x44444428,0x28282810,0x10100000 ,//"V"
//         0x0000EE44,0x54545454,0x54542828,0x28280000 ,//"W"
//         0x0000EE44,0x44282810,0x10282844,0x44EE0000 ,//"X"
//         0x0000EE44,0x44282828,0x10101010,0x10380000 ,//"Y"
//         0x00007E44,0x84080810,0x20204082,0x84FC0000 ,//"Z"
//         0x001C1010,0x10101010,0x10101010,0x10101C00 ,//"["
//         0x0000EE44,0x5454FE54,0x54542828,0x28280000 ,//"\"
//         0x00701010,0x10101010,0x10101010,0x10107000 ,//"]"
//         0x00304884,0x00000000,0x00000000,0x00000000 ,//"^"
//         0x00000000,0x00000000,0x00000000,0x0000FE00 ,//"_"
//         0x00402000,0x00000000,0x00000000,0x00000000 ,//"`"
//         0x00000000,0x00007884,0x047C8484,0x8C760000 ,//"a"
//         0x0000C040,0x40405864,0x42424242,0x64580000 ,//"b"
//         0x00000000,0x00003844,0x80808080,0x44380000 ,//"c"
//         0x00000C04,0x0404344C,0x84848484,0x4C360000 ,//"d"
//         0x00000000,0x00007884,0x84FC8080,0x84780000 ,//"e"
//         0x00001824,0x2020F820,0x20202020,0x20700000 ,//"f"
//         0x00000000,0x00003A44,0x4478807C,0x82827C00 ,//"g"
//         0x0000C040,0x40405864,0x44444444,0x44EE0000 ,//"h"
//         0x00001010,0x00003010,0x10101010,0x10380000 ,//"i"
//         0x00001010,0x00003010,0x10101010,0x10906000 ,//"j"
//         0x0000C040,0x40405C48,0x50605048,0x44EE0000 ,//"k"
//         0x00003010,0x10101011,0x10101010,0x10390000 ,//"l"
//         0x00000000,0x0000ACD2,0x92929292,0x92D60000 ,//"m"
//         0x00000000,0x000058E4,0x44444444,0x44EE0000 ,//"n"
//         0x00000000,0x00003844,0x82828282,0x44380000 ,//"o"
//         0x00000000,0x0000D864,0x42424264,0x5840E000 ,//"p"
//         0x00000000,0x0000364C,0x8484844C,0x34040E00 ,//"q"
//         0x00000000,0x00006C30,0x20202020,0x20700000 ,//"r"
//         0x00000000,0x00007888,0x84601884,0x44780000 ,//"s"
//         0x00000020,0x2020F820,0x20202020,0x24180000 ,//"t"
//         0x00000000,0x0000C642,0x42424242,0x463A0000 ,//"u"
//         0x00000000,0x0000EE44,0x44282828,0x10100000 ,//"v"
//         0x00000000,0x0000EE44,0x44545428,0x28280000 ,//"w"
//         0x00000000,0x0000EE44,0x28101028,0x44EE0000 ,//"x"
//         0x00000000,0x0000EE44,0x44282810,0x10A0C000 ,//"y"
//         0x00000000,0x00007E44,0x88102042,0x84FC0000 ,//"z"
//         0x000C1010,0x10101060,0x10101010,0x10100C00 ,//"{"
//         0x00101010,0x10101010,0x10101010,0x10101000 ,//"|"
//         0x00C02020,0x20202018,0x20202020,0x2020C000 ,//"}"
//         0x00000000,0x00000072,0x8C000000,0x00000000 //"~"
//     ]
//     export enum LCDcolor {
//         //% blockId="RED" block="红色"
//         RED = 0xf800,
//         //% blockId="GREEN" block="绿色"
//         GREEN = 0x07e0,
//         //% blockId="BLUE" block="蓝色"
//         BLUE = 0x001f,
//         //% blockId="WHITE" block="白色"
//         WHITE = 0xffff,
//         //% blockId="BLACK" block="黑色"
//         BLACK = 0x0000,
//         //% blockId="YELLOW" block="黄色"
//         YELLOW = 0xFFE0,
//         //% blockId="GRAY0" block="浅灰"
//         GRAY0 = 0xEF7D,  	                    //灰色0 3165 00110 001011 00101
//         //% blockId="GRAY1" block="中灰"
//         GRAY1 = 0x8410,      	                //灰色1      00000 000000 00000
//         //% blockId="GRAY2" block="深灰"
//         GRAY2=0x4208      	                    //灰色2  1111111111011111
//     }
//     //写指令
//     function LCDWriteindex (value: number) {
//         pins.digitalWritePin(DigitalPin.P16, 0)
//         pins.digitalWritePin(DigitalPin.P10, 0)
//         pins.spiWrite(value)
//         pins.digitalWritePin(DigitalPin.P16, 1)
//     }
//     //写8位数据
//     function LCDWritedata (value: number) {
//         pins.digitalWritePin(DigitalPin.P16, 0)
//         pins.digitalWritePin(DigitalPin.P10, 1)
//         pins.spiWrite(value)
//         pins.digitalWritePin(DigitalPin.P16, 1)
//     }
//     //写16位数据
//     function LCDWritedata16 (value: number) {
//         pins.digitalWritePin(DigitalPin.P16, 0)
//         pins.digitalWritePin(DigitalPin.P10, 1)
//         pins.spiWrite(value >> 8)
//         pins.spiWrite(value)
//         pins.digitalWritePin(DigitalPin.P16, 1)
//     }
//     //：设置lcd显示区域，在此区域写点数据自动换行
//     function Lcd_SetRegion (x_s: number, y_s: number, x_e: number, y_e: number) {
//         LCDWriteindex(42)
//         LCDWritedata(0)
//         LCDWritedata(x_s)
//         LCDWritedata(0)
//         LCDWritedata(x_e)
//         LCDWriteindex(43)
//         LCDWritedata(0)
//         LCDWritedata(y_s)
//         LCDWritedata(0)
//         LCDWritedata(y_e)
//         LCDWriteindex(44)
//     }
//     //LCD写Reg
//     function Lcd_WriteReg (index: number, data: number) {
//         LCDWriteindex(index)
//         LCDWritedata(data)
//     }
//     //设置lcd显示起始点
//     function Lcd_SetXY (x: number, y: number) {
//         Lcd_SetRegion(x + 2, y + 1, x + 2, y + 1)
//     }
//     //画一个点
//     function Gui_DrawPoint (x: number, y: number, data: number) {
//         Lcd_SetRegion(x + 2, y + 1, x + 3, y + 2)
//         LCDWritedata16(data)
//     }
//     /**
//      * 
//      * @param index
//     */
//     //% blockId=HuLuMaoGame_LcdInit block="初始化大显示屏"
//     //% weight=150
//     //% blockGap=10
//     //% color="#006400"
//     //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
//     export function LcdInit(): void {
//         pins.setPull(DigitalPin.P16, PinPullMode.PullUp)
//         pins.setPull(DigitalPin.P15, PinPullMode.PullUp)
//         pins.setPull(DigitalPin.P14, PinPullMode.PullUp)
//         pins.setPull(DigitalPin.P13, PinPullMode.PullUp)
//         pins.setPull(DigitalPin.P12, PinPullMode.PullUp)
//         pins.setPull(DigitalPin.P8, PinPullMode.PullUp)
//         pins.spiFormat(8, 1)
//         pins.spiPins(DigitalPin.P15, DigitalPin.P14, DigitalPin.P13)
//         pins.spiFrequency(40000000)
//         pins.digitalWritePin(DigitalPin.P8, 1)
//         pins.digitalWritePin(DigitalPin.P12, 1)
//         pins.digitalWritePin(DigitalPin.P12, 0)
//         pins.digitalWritePin(DigitalPin.P12, 1)

//         LCDReset()
//         LCDWriteindex(17)
//         basic.pause(120)
//         LCDWriteindex(177)
//         LCDWritedata(5)
//         LCDWritedata(60)
//         LCDWritedata(60)
//         LCDWriteindex(178)
//         LCDWritedata(5)
//         LCDWritedata(60)
//         LCDWritedata(60)
//         LCDWriteindex(179)
//         LCDWritedata(5)
//         LCDWritedata(60)
//         LCDWritedata(60)
//         LCDWritedata(5)
//         LCDWritedata(60)
//         LCDWritedata(60)
//         LCDWriteindex(180)
//         LCDWritedata(3)
//         LCDWriteindex(192)
//         LCDWritedata(40)
//         LCDWritedata(8)
//         LCDWritedata(4)
//         LCDWriteindex(193)
//         LCDWritedata(192)
//         LCDWriteindex(194)
//         LCDWritedata(13)
//         LCDWritedata(0)
//         LCDWriteindex(195)
//         LCDWritedata(141)
//         LCDWritedata(42)
//         LCDWriteindex(196)
//         LCDWritedata(141)
//         LCDWritedata(238)
//         LCDWriteindex(197)
//         LCDWritedata(26)
//         LCDWriteindex(54)
//         LCDWritedata(192)
//         LCDWriteindex(224)
//         LCDWritedata(4)
//         LCDWritedata(34)
//         LCDWritedata(7)
//         LCDWritedata(10)
//         LCDWritedata(46)
//         LCDWritedata(48)
//         LCDWritedata(37)
//         LCDWritedata(42)
//         LCDWritedata(40)
//         LCDWritedata(38)
//         LCDWritedata(46)
//         LCDWritedata(58)
//         LCDWritedata(0)
//         LCDWritedata(1)
//         LCDWritedata(3)
//         LCDWritedata(19)
//         LCDWriteindex(225)
//         LCDWritedata(4)
//         LCDWritedata(22)
//         LCDWritedata(6)
//         LCDWritedata(13)
//         LCDWritedata(45)
//         LCDWritedata(38)
//         LCDWritedata(35)
//         LCDWritedata(39)
//         LCDWritedata(39)
//         LCDWritedata(37)
//         LCDWritedata(45)
//         LCDWritedata(59)
//         LCDWritedata(0)
//         LCDWritedata(1)
//         LCDWritedata(4)
//         LCDWritedata(18)
//         LCDWriteindex(58)
//         LCDWritedata(5)
//         LCDWriteindex(41)
//     }
//     /**
//      * 
//      * @param index
//     */
//     //% blockId=HuLuMaoGame_LCDReset block="复位显示屏"
//     //% weight=149
//     //% blockGap=10
//     //% color="#006400"
//     //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
//     export function LCDReset () {
//         pins.digitalWritePin(DigitalPin.P8, 0)
//         basic.pause(300)
//         pins.digitalWritePin(DigitalPin.P8, 1)
//         basic.pause(100)
//     }

//     /**
//      * 
//      * @param index
//     */
//     //% blockId=HuLuMaoGame_Lcd_Clear block="清空屏幕并将底色设置为|%value"
//     //% weight=148 
//     //% blockGap=10
//     //% color="#006400"
//     //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
//     export function Lcd_Clear (value:LCDcolor) {
//         Lcd_SetRegion(2, 1, 129, 160)
//         LCDWriteindex(44)
//         for (let i = 0; i < 160; i++) {
//             for (let j = 0; j < 128; j++) {
//                 LCDWritedata16(value)
//             }
//         }
//     }

//         /**
//      * 
//      * @param index
//     */
//     //% blockId=HuLuMaoGame_Lcd_Clearxy block="清空指定区域并将底色设置为|%value 起点 x0 =%x0 y0 =%y0 终点 x1= %x1 y1 =%y1"
//     //% weight=147 
//     //% blockGap=10
//     //% color="#006400"
//     //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
//     export function Lcd_Clearxy (value:LCDcolor,x0:number,y0:number,x1:number,y1:number) {
//         Lcd_SetRegion(x0, y0, x1, y1)
//         LCDWriteindex(44)
//         for (let i = 0; i < y1; i++) {
//             for (let j = 0; j < x1; j++) {
//                 LCDWritedata16(value)
//             }
//         }
//     }
//     /**
//      * 
//      * @param index
//     */
//     //% blockId=HuLuMaoGame_LCD_Gui_DrawFont_GBK16 block="在 x =%x y =%y显示字符%text 字符颜色为%c1 底色为%c2"
//     //% weight=97
//     //% blockGap=10
//     //% color="#006400"
//     //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
//     export function LCD_Gui_DrawFont_GBK16(x:number,y:number,text:string,c1:LCDcolor,c2:LCDcolor) {
//         let i, j, k, x0,num
//         x0 = x
        
//         for (let n = 0; n < text.length; n++){
//             if (text.charCodeAt(n)<128) {
//                 k = text.charCodeAt(n)
//                 if (k == 13) {
//                     x = x0
//                     y += 16
//                 }
//                 else {
//                     if (k > 32) k -= 32
//                     else k = 0;
//                     for (i = 0; i<16; i++){
//                         num=asc16[k*4+i/4]
//                         for (j = 0; j < 8; j++){
//                             if (((num>>((3-(i%4))*8))&0x000000ff)&(0x80>>j)) {
//                                 Gui_DrawPoint(x + j, y + i, c1)
//                             }
//                             else {
//                                 if (c1 != c2) {
//                                     Gui_DrawPoint(x + j, y + i, c2)
//                                 }
//                             }
                            
//                         }
//                     }
//                     x += 8
//                 }
//             }
//         }
//     }

//     /**
//      * 
//      * @param index
//     */
//     //% blockId=HuLuMaoGame_LCD_Gui_DrawFont_number block="在x =%x y =%y显示数字%data 数字颜色为%c1 底色为%c2"
//     //% weight=96
//     //% blockGap=10
//     //% color="#006400"
//     //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
//     export function LCD_Gui_DrawFont_number(x:number,y:number,data:number,c1:LCDcolor,c2:LCDcolor) {
//         LCD_Gui_DrawFont_GBK16(x, y, data.toString(), c1, c2)
//     }

//      /**
//      * 
//      * @param index
//     */
//     //% blockId=HuLuMaoGame_LCD_Gui_Circle block="画一个圆，圆心 x =%X y =%Y 半径 r= %r 颜色为%fc"
//     //% weight=95
//     //% blockGap=10
//     //% color="#006400"
//     //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
//     export function LCD_Gui_Circle(X:number,Y:number,r:number,fc:LCDcolor) {
//         let a, b, c
//         a = 0
//         b = r
//         c = 3 - 2 * r
//         while (a < b) {
//             Gui_DrawPoint(X+a,Y+b,fc);    
//             Gui_DrawPoint(X-a,Y+b,fc);      
//             Gui_DrawPoint(X+a,Y-b,fc);      
//             Gui_DrawPoint(X-a,Y-b,fc);      
//             Gui_DrawPoint(X+b,Y+a,fc);            
//             Gui_DrawPoint(X-b,Y+a,fc);           
//             Gui_DrawPoint(X+b,Y-a,fc);            
//             Gui_DrawPoint(X-b,Y-a,fc);             

//             if(c<0) c=c+4*a+6; 
//             else 
//             { 
//                 c=c+4*(a-b)+10; 
//                 b-=1; 
//             } 
//             a+=1;
//         }
//         if (a==b)  { 
//             Gui_DrawPoint(X+a,Y+b,fc); 
//             Gui_DrawPoint(X+a,Y+b,fc); 
//             Gui_DrawPoint(X+a,Y-b,fc); 
//             Gui_DrawPoint(X-a,Y-b,fc); 
//             Gui_DrawPoint(X+b,Y+a,fc); 
//             Gui_DrawPoint(X-b,Y+a,fc); 
//             Gui_DrawPoint(X+b,Y-a,fc); 
//             Gui_DrawPoint(X-b,Y-a,fc); 
//         }
//     }
//     /**
//      * 
//      * @param index
//     */
//     //% blockId=HuLuMaoGame_LCD_Gui_DrawLine block="画一条直线，起点 x0 =%x0 y0 =%y0 终点 x1 =%x1 y1 =%y1 颜色为%Color"
//     //% weight=94
//     //% blockGap=10
//     //% color="#006400"
//     //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
//     export function LCD_Gui_DrawLine(x0:number,y0:number,x1:number,y1:number, Color:LCDcolor) {
//         let dx,             // difference in x's
//             dy,             // difference in y's
//             dx2,            // dx,dy * 2
//             dy2, 
//             x_inc,          // amount in pixel space to move during drawing
//             y_inc,          // amount in pixel space to move during drawing
//             error,          // the discriminant i.e. error i.e. decision variable
//             index;          // used for looping	
//             Lcd_SetXY(x0,y0);
//             dx = x1-x0;//计算x距离
//             dy = y1-y0;//计算y距离
        
//             if (dx>=0)
//             {
//                 x_inc = 1;
//             }
//             else
//             {
//                 x_inc = -1;
//                 dx    = -dx;  
//             } 
            
//             if (dy>=0)
//             {
//                 y_inc = 1;
//             } 
//             else
//             {
//                 y_inc = -1;
//                 dy    = -dy; 
//             } 
        
//             dx2 = dx << 1;
//             dy2 = dy << 1;
        
//             if (dx > dy)//x距离大于y距离，那么每个x轴上只有一个点，每个y轴上有若干个点
//             {//且线的点数等于x距离，以x轴递增画点
//                 // initialize error term
//                 error = dy2 - dx; 
        
//                 // draw the line
//                 for (index=0; index <= dx; index++)//要画的点数不会超过x距离
//                 {
//                     //画点
//                     Gui_DrawPoint(x0,y0,Color);
                    
//                     // test if error has overflowed
//                     if (error >= 0) //是否需要增加y坐标值
//                     {
//                         error-=dx2;
        
//                         // move to next line
//                         y0+=y_inc;//增加y坐标值
//                     } // end if error overflowed
        
//                     // adjust the error term
//                     error+=dy2;
        
//                     // move to the next pixel
//                     x0+=x_inc;//x坐标值每次画点后都递增1
//                 } // end for
//             } // end if |slope| <= 1
//             else//y轴大于x轴，则每个y轴上只有一个点，x轴若干个点
//             {//以y轴为递增画点
//                 // initialize error term
//                 error = dx2 - dy; 
        
//                 // draw the line
//                 for (index=0; index <= dy; index++)
//                 {
//                     // set the pixel
//                     Gui_DrawPoint(x0,y0,Color);
        
//                     // test if error overflowed
//                     if (error >= 0)
//                     {
//                         error-=dy2;
        
//                         // move to next line
//                         x0+=x_inc;
//                     } // end if error overflowed
        
//                     // adjust the error term
//                     error+=dx2;
        
//                     // move to the next pixel
//                     y0+=y_inc;
//                 } // end for
//             } // end else |slope| > 1
//     }

//     /**
//      * 
//      * @param index
//     */
//     //% blockId=HuLuMaoGame_LCD_Gui_rectangle block="画一个矩形，起点 x =%x y =%y 宽 =%w 高 =%h 颜色为%bc"
//     //% weight=93
//     //% blockGap=10
//     //% color="#006400"
//     //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
//     export function LCD_Gui_rectangle(x: number, y: number, w: number, h: number, bc: LCDcolor) {
//         LCD_Gui_DrawLine(x,y,x+w,y,bc)
//         LCD_Gui_DrawLine(x+w,y,x+w,y+h,bc)
//         LCD_Gui_DrawLine(x,y+h,x+w,y+h,bc)
//         LCD_Gui_DrawLine(x,y,x,y+h,bc)
//     }

// }





























//% color="#cc33ff" weight=50 icon="\uf1b9" block="呼噜猫游戏机小屏"
namespace HuLuMaoGame1 {
    const chipAdress = 0x3C//显示屏地址
    const OLED_CMD =0	//写命令
    const OLED_DATA=1	//写数据

    let Hzk=[

       //  年(0) 月(1) 日(2) 时(3) 分(4) 秒(5) 表(6) 计(7) 闹(8) 钟(9) 星(10) 期(11) 间(12) 开(13) 关(14) 铃(15)声(16)

            [0x00,0x20,0x18,0xC7,0x44,0x44,0x44,0x44,0xFC,0x44,0x44,0x44,0x44,0x04,0x00,0x00],
            // [0x04,0x04,0x04,0x07,0x04,0x04,0x04,0x04,0xFF,0x04,0x04,0x04,0x04,0x04,0x04,0x00],/*"年",0*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x00,0x00,0x00,0xFE,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0xFE,0x00,0x00,0x00],
            // [0x80,0x40,0x30,0x0F,0x02,0x02,0x02,0x02,0x02,0x02,0x42,0x82,0x7F,0x00,0x00,0x00],/*"月",1*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x00,0x00,0x00,0xFE,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0xFE,0x00,0x00,0x00,0x00],
            // [0x00,0x00,0x00,0xFF,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0xFF,0x00,0x00,0x00,0x00],/*"日",2*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x00,0xFC,0x84,0x84,0x84,0xFC,0x00,0x10,0x10,0x10,0x10,0x10,0xFF,0x10,0x10,0x00],
            // [0x00,0x3F,0x10,0x10,0x10,0x3F,0x00,0x00,0x01,0x06,0x40,0x80,0x7F,0x00,0x00,0x00],/*"时",3*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x80,0x40,0x20,0x90,0x88,0x86,0x80,0x80,0x80,0x83,0x8C,0x10,0x20,0x40,0x80,0x00],
            // [0x00,0x80,0x40,0x20,0x18,0x07,0x00,0x40,0x80,0x40,0x3F,0x00,0x00,0x00,0x00,0x00],/*"分",4*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x24,0x24,0xA4,0xFE,0x23,0x22,0x00,0xC0,0x38,0x00,0xFF,0x00,0x08,0x10,0x60,0x00],
            // [0x08,0x06,0x01,0xFF,0x01,0x06,0x81,0x80,0x40,0x40,0x27,0x10,0x0C,0x03,0x00,0x00],/*"秒",5*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x00,0x04,0x24,0x24,0x24,0x24,0x24,0xFF,0x24,0x24,0x24,0x24,0x24,0x04,0x00,0x00],
            // [0x21,0x21,0x11,0x09,0xFD,0x83,0x41,0x23,0x05,0x09,0x11,0x29,0x25,0x41,0x41,0x00],/*"表",6*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x40,0x40,0x42,0xCC,0x00,0x40,0x40,0x40,0x40,0xFF,0x40,0x40,0x40,0x40,0x40,0x00],
            // [0x00,0x00,0x00,0x7F,0x20,0x10,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00],/*"计",7*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x00,0xF8,0x01,0x22,0x20,0x22,0x2A,0xF2,0x22,0x22,0x22,0x22,0x02,0xFE,0x00,0x00],
            // [0x00,0xFF,0x00,0x00,0x1F,0x01,0x01,0x7F,0x09,0x11,0x0F,0x40,0x80,0x7F,0x00,0x00],/*"闹",8*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x20,0x10,0x2C,0xE7,0x24,0x24,0x00,0xF0,0x10,0x10,0xFF,0x10,0x10,0xF0,0x00,0x00],
            // [0x01,0x01,0x01,0x7F,0x21,0x11,0x00,0x07,0x02,0x02,0xFF,0x02,0x02,0x07,0x00,0x00],/*"钟",9*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x00,0x00,0x00,0xBE,0x2A,0x2A,0x2A,0xEA,0x2A,0x2A,0x2A,0x3E,0x00,0x00,0x00,0x00],
            // [0x00,0x44,0x42,0x49,0x49,0x49,0x49,0x7F,0x49,0x49,0x49,0x49,0x41,0x40,0x00,0x00],/*"星",10*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x00,0x04,0xFF,0x24,0x24,0x24,0xFF,0x04,0x00,0xFE,0x22,0x22,0x22,0xFE,0x00,0x00],
            // [0x88,0x48,0x2F,0x09,0x09,0x19,0xAF,0x48,0x30,0x0F,0x02,0x42,0x82,0x7F,0x00,0x00],/*"期",11*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x00,0xF8,0x01,0x06,0x00,0xF0,0x12,0x12,0x12,0xF2,0x02,0x02,0x02,0xFE,0x00,0x00],
            // [0x00,0xFF,0x00,0x00,0x00,0x1F,0x11,0x11,0x11,0x1F,0x00,0x40,0x80,0x7F,0x00,0x00],/*"间",12*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x80,0x82,0x82,0x82,0xFE,0x82,0x82,0x82,0x82,0x82,0xFE,0x82,0x82,0x82,0x80,0x00],
            // [0x00,0x80,0x40,0x30,0x0F,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00],/*"开",13*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x00,0x00,0x10,0x11,0x16,0x10,0x10,0xF0,0x10,0x10,0x14,0x13,0x10,0x00,0x00,0x00],
            // [0x81,0x81,0x41,0x41,0x21,0x11,0x0D,0x03,0x0D,0x11,0x21,0x41,0x41,0x81,0x81,0x00],/*"关",14*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x40,0x30,0xEF,0x24,0x24,0x40,0x20,0x10,0x0C,0x23,0xCC,0x10,0x20,0x40,0x40,0x00],
            // [0x01,0x01,0x7F,0x21,0x11,0x00,0x01,0x09,0x11,0x21,0xD1,0x0D,0x03,0x00,0x00,0x00],/*"铃",15*/
            // /* (16 X 16 , 宋体 )*/
            
            // [0x04,0x14,0xD4,0x54,0x54,0x54,0x54,0xDF,0x54,0x54,0x54,0x54,0xD4,0x14,0x04,0x00],
            // [0x80,0x60,0x1F,0x02,0x02,0x02,0x02,0x03,0x02,0x02,0x02,0x02,0x03,0x00,0x00,0x00],/*"声",16*/
            // /* (16 X 16 , 宋体 )*/

        
        
    ]
    export enum dispaly_c{
        //% blockId="_0" block="年"
        _0 = 0,
        //% blockId="_1" block="月"
        _1 ,
        //% blockId="_2" block="日"
        _2 ,
        //% blockId="_3" block="时"
        _3 ,
        //% blockId="_4" block="分"
        _4 ,
        //% blockId="_5" block="秒"
        _5 ,
        //% blockId="_6" block="表"
        _6 ,
        //% blockId="_7" block="计"
        _7 ,
        //% blockId="_8" block="闹"
        _8 ,
        //% blockId="_9" block="钟"
        _9 ,
        //% blockId="_10" block="星"
        _10 ,
        //% blockId="_11" block="期"
        _11 ,
        //% blockId="_12" block="间"
        _12 ,
        //% blockId="_13" block="开"
        _13,
        //% blockId="_14" block="关"
        _14 ,
        //% blockId="_15" block="铃"
        _15 ,
        //% blockId="_16" block="声"
        _16
    }
    export enum display{
        //% blockId="on" block="开启"
        on = 0,
        //% blockId="off" block="关闭"
        off = 1,
    }
    //写指令
    function Write_IIC_Command(com:number){
        let buf = pins.createBuffer(2)
        buf[0]=0x00
        buf[1]=com

        pins.i2cWriteBuffer(chipAdress, buf);
    }
    //写数据
    function Write_IIC_Data(data:number){
        let buf = pins.createBuffer(2)
        buf[0]=0x40
        buf[1]=data

        pins.i2cWriteBuffer(chipAdress, buf);
    }
    //写一个字节
    function OLED_WR_Byte(data:number,CorD:number){
        if(CorD!=0){
            Write_IIC_Data(data)
        }else{
            Write_IIC_Command(data)
        }
    }
    //坐标设置
    function OLED_Set_Pos(x:number,y:number){

        OLED_WR_Byte(0xb0+y,OLED_CMD);
	    OLED_WR_Byte(((x&0xf0)>>4)|0x10,OLED_CMD);
	    OLED_WR_Byte((x&0x0f),OLED_CMD); 
    }
    

     /**
     * 
     * @param index
    */
    //% blockId=HuLuMaoGame1_OLED_Init block="初始化小显示屏"
    //% weight=150
    //% blockGap=10
    //% color="#cc33ff"
    //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
    export function OLED_Init(): void {
        pins.digitalWritePin(DigitalPin.P9, 0)
        basic.pause(200)
        pins.digitalWritePin(DigitalPin.P9, 1)
        
        OLED_WR_Byte(0xAE,OLED_CMD);//--turn off oled panel
        OLED_WR_Byte(0x00,OLED_CMD);//---set low column address
        OLED_WR_Byte(0x10,OLED_CMD);//---set high column address
        OLED_WR_Byte(0x40,OLED_CMD);//--set start line address  Set Mapping RAM Display Start Line (0x00~0x3F)
        OLED_WR_Byte(0x81,OLED_CMD);//--set contrast control register
        OLED_WR_Byte(0xCF,OLED_CMD);// Set SEG Output Current Brightness
        OLED_WR_Byte(0xA1,OLED_CMD);//--Set SEG/Column Mapping     0xa0左右反置 0xa1正常
        OLED_WR_Byte(0xC8,OLED_CMD);//Set COM/Row Scan Direction   0xc0上下反置 0xc8正常
        OLED_WR_Byte(0xA6,OLED_CMD);//--set normal display
        OLED_WR_Byte(0xA8,OLED_CMD);//--set multiplex ratio(1 to 64)
        OLED_WR_Byte(0x3f,OLED_CMD);//--1/64 duty
        OLED_WR_Byte(0xD3,OLED_CMD);//-set display offset	Shift Mapping RAM Counter (0x00~0x3F)
        OLED_WR_Byte(0x00,OLED_CMD);//-not offset
        OLED_WR_Byte(0xd5,OLED_CMD);//--set display clock divide ratio/oscillator frequency
        OLED_WR_Byte(0x80,OLED_CMD);//--set divide ratio, Set Clock as 100 Frames/Sec
        OLED_WR_Byte(0xD9,OLED_CMD);//--set pre-charge period
        OLED_WR_Byte(0xF1,OLED_CMD);//Set Pre-Charge as 15 Clocks & Discharge as 1 Clock
        OLED_WR_Byte(0xDA,OLED_CMD);//--set com pins hardware configuration
        OLED_WR_Byte(0x12,OLED_CMD);
        OLED_WR_Byte(0xDB,OLED_CMD);//--set vcomh
        OLED_WR_Byte(0x40,OLED_CMD);//Set VCOM Deselect Level
        OLED_WR_Byte(0x20,OLED_CMD);//-Set Page Addressing Mode (0x00/0x01/0x02)
        OLED_WR_Byte(0x02,OLED_CMD);//
        OLED_WR_Byte(0x8D,OLED_CMD);//--set Charge Pump enable/disable
        OLED_WR_Byte(0x14,OLED_CMD);//--set(0x10) disable
        OLED_WR_Byte(0xA4,OLED_CMD);// Disable Entire Display On (0xa4/0xa5)
        OLED_WR_Byte(0xA6,OLED_CMD);// Disable Inverse Display On (0xa6/a7) 
        OLED_WR_Byte(0xAF,OLED_CMD);
        OLED_Clear();
    }

    /**
     * 
     * @param index
    */
    //% blockId=HuLuMaoGame1_OLED_Clear block="清空显示屏"
    //% weight=149
    //% blockGap=10
    //% color="#cc33ff"
    //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
    export function OLED_Clear():void{
        // let i,n;		    
        // for(i=0;i<8;i++)  
        // {  
        //     OLED_WR_Byte (0xb0+i,OLED_CMD);    //设置页地址（0~7）
        //     OLED_WR_Byte (0x00,OLED_CMD);      //设置显示位置—列低地址
        //     OLED_WR_Byte (0x10,OLED_CMD);      //设置显示位置—列高地址   
        //     for(n=0;n<128;n++) OLED_WR_Byte(0,OLED_DATA); 
        // } 
        OLED_Clearxy(0,0,128,8)
    }

    /**
     * 
     * @param index
    */
    //% blockId=HuLuMaoGame1_OLED_Clearxy block="清空指定区域 起点 x0 =%x0 y0 =%y0  终点 x1 =%x1 y1 =%y1"
    //% weight=148
    //% blockGap=10
    //% color="#cc33ff"
    //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
    export function OLED_Clearxy(x0:number,y0:number,x1:number,y1:number):void{
        let x,y;
        for(y=y0;y<y1;y++)
        {
            OLED_Set_Pos(x0,y);
            for(x=x0;x<x1;x++)
            {
                OLED_WR_Byte(0,OLED_DATA);
            }
        } 
    }

    /**
     * 
     * @param index
    */
    //% blockId=HuLuMaoGame1_OLED_display block="|%dis显示"
    //% weight=147
    //% blockGap=10
    //% color="#cc33ff"
    //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
    export function OLED_display(dis:display):void{
        OLED_WR_Byte(0X8D,OLED_CMD);  //SET DCDC命令
        if(dis==display.on){
            OLED_WR_Byte(0X14,OLED_CMD);  //DCDC ON
	        OLED_WR_Byte(0XAF,OLED_CMD);  //DISPLAY ON
        }else{
            OLED_WR_Byte(0X10,OLED_CMD);  //DCDC OFF
	        OLED_WR_Byte(0XAE,OLED_CMD);  //DISPLAY OFF
        }
    }

    /**
     * 
     * @param index
    */
    //% blockId=HuLuMaoGame1_OLED_ShowChar block="在 x=|%x,y=|%y处显示字符|%chr"
    //% weight=146
    //% blockGap=10
    //% color="#cc33ff"
    //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
    export function OLED_ShowChar(x:number,y:number,chr:string){
        let n,k,i,m
        let data:number=0
        let y0=y
        let asc16=[
            0x00000000,0x00000000,0x00000000,0x00000000 ,//" "
            0x00101010,0x10101010,0x10100000,0x10100000 ,//"!"
            0x00006C6C,0x24240000,0x00000100,0x00000000 ,//"""
            0x00242424,0x24FE4848,0x4848FC90,0x90909000 ,//"#"
            0x00103C54,0x92905038,0x14121292,0x54781000 ,//"$"
            0x0000225C,0x94A84810,0x10242A52,0x54880000 ,//"%"
            0x00003048,0x4850206E,0x54948C88,0x8A740000 ,//"&"
            0x00003030,0x10100000,0x00000000,0x00000000 ,//"'"
            0x00040810,0x10202020,0x20202010,0x10080400 ,//"("
            0x00804020,0x20101010,0x10101020,0x20408000 ,//")"
            0x00000000,0x10543810,0x38541000,0x00000000 ,//"*"
            0x00000010,0x101010FE,0x10101010,0x00000000 ,//"+"
            0x00000000,0x00000000,0x00000000,0x10102000 ,//" "
            0x00000000,0x000000FE,0x00000000,0x00000000 ,//"-"
            0x00000000,0x00000000,0x00000000,0x10100000 ,//"."
            0x00000404,0x08081010,0x20204040,0x80800000 ,//"/"
            0x00003844,0x82828282,0x82828282,0x44380000 ,//"0"
            0x00001070,0x10101010,0x10101010,0x107C0000 ,//"1"
            0x00003844,0x82820408,0x10204082,0x84FC0000 ,//"2"
            0x00003844,0x82020438,0x04020282,0x44380000 ,//"3"
            0x0000040C,0x14142424,0x4444FE04,0x040E0000 ,//"4"
            0x0000FC80,0x8080B8C4,0x82020282,0x84780000 ,//"5"
            0x00003C42,0x8280B8C4,0x82828282,0x44380000 ,//"6"
            0x00007E42,0x82040408,0x08081010,0x10100000 ,//"7"
            0x00003844,0x82824438,0x44828282,0x44380000 ,//"8"
            0x00003844,0x82828282,0x463A0282,0x44380000 ,//"9"
            0x00000000,0x10100000,0x00001010,0x00000000 ,//":"
            0x00000000,0x10100000,0x00000010,0x10200000 ,//";"
            0x00000000,0x06186080,0x60180600,0x00000000 ,//"<"
            0x00000000,0x0000FE00,0x00FE0000,0x00000000 ,//"="
            0x00000000,0xC0300C02,0x0C30C000,0x00000000 ,//">"
            0x00384482,0x82020408,0x10101000,0x10100000 ,//"?"
            0x00003844,0x829AAAAA,0xAAAAAA96,0x80423C00 ,//"@"
            0x00001010,0x10282828,0x44447C44,0x44EE0000 ,//"A"
            0x0000FC42,0x4242427C,0x42424242,0x42FC0000 ,//"B"
            0x00003C44,0x82808080,0x80808282,0x44380000 ,//"C"
            0x0000F844,0x42424242,0x42424242,0x44F80000 ,//"D"
            0x0000FC44,0x4240447C,0x44404042,0x44FC0000 ,//"E"
            0x0000FC44,0x4240447C,0x44404040,0x40F00000 ,//"F"
            0x0000344C,0x82808080,0x8E848484,0x4C340000 ,//"G"
            0x0000EE44,0x4444447C,0x44444444,0x44EE0000 ,//"H"
            0x00007C10,0x10101010,0x10101010,0x107C0000 ,//"I"
            0x00003E08,0x08080808,0x08080888,0x88700000 ,//"J"
            0x0000EE44,0x48485060,0x50484844,0x44EE0000 ,//"K"
            0x0000E040,0x40404040,0x40404042,0x44FC0000 ,//"L"
            0x0000C644,0x6C6C6C54,0x54544444,0x44EE0000 ,//"M"
            0x0000CE44,0x64646454,0x544C4C4C,0x44E40000 ,//"N"
            0x00003844,0x82828282,0x82828282,0x44380000 ,//"O"
            0x0000F844,0x42424244,0x78404040,0x40E00000 ,//"P"
            0x00003844,0x82828282,0x828282BA,0x443C0200 ,//"Q"
            0x0000F048,0x44444448,0x70484444,0x44E60000 ,//"R"
            0x00003C44,0x82804030,0x0C020282,0x44780000 ,//"S"
            0x00007C54,0x92101010,0x10101010,0x10380000 ,//"T"
            0x0000EE44,0x44444444,0x44444444,0x44380000 ,//"U"
            0x0000EE44,0x44444428,0x28282810,0x10100000 ,//"V"
            0x0000EE44,0x54545454,0x54542828,0x28280000 ,//"W"
            0x0000EE44,0x44282810,0x10282844,0x44EE0000 ,//"X"
            0x0000EE44,0x44282828,0x10101010,0x10380000 ,//"Y"
            0x00007E44,0x84080810,0x20204082,0x84FC0000 ,//"Z"
            0x001C1010,0x10101010,0x10101010,0x10101C00 ,//"["
            0x0000EE44,0x5454FE54,0x54542828,0x28280000 ,//"\"
            0x00701010,0x10101010,0x10101010,0x10107000 ,//"]"
            0x00304884,0x00000000,0x00000000,0x00000000 ,//"^"
            0x00000000,0x00000000,0x00000000,0x0000FE00 ,//"_"
            0x00402000,0x00000000,0x00000000,0x00000000 ,//"`"
            0x00000000,0x00007884,0x047C8484,0x8C760000 ,//"a"
            0x0000C040,0x40405864,0x42424242,0x64580000 ,//"b"
            0x00000000,0x00003844,0x80808080,0x44380000 ,//"c"
            0x00000C04,0x0404344C,0x84848484,0x4C360000 ,//"d"
            0x00000000,0x00007884,0x84FC8080,0x84780000 ,//"e"
            0x00001824,0x2020F820,0x20202020,0x20700000 ,//"f"
            0x00000000,0x00003A44,0x4478807C,0x82827C00 ,//"g"
            0x0000C040,0x40405864,0x44444444,0x44EE0000 ,//"h"
            0x00001010,0x00003010,0x10101010,0x10380000 ,//"i"
            0x00001010,0x00003010,0x10101010,0x10906000 ,//"j"
            0x0000C040,0x40405C48,0x50605048,0x44EE0000 ,//"k"
            0x00003010,0x10101011,0x10101010,0x10390000 ,//"l"
            0x00000000,0x0000ACD2,0x92929292,0x92D60000 ,//"m"
            0x00000000,0x000058E4,0x44444444,0x44EE0000 ,//"n"
            0x00000000,0x00003844,0x82828282,0x44380000 ,//"o"
            0x00000000,0x0000D864,0x42424264,0x5840E000 ,//"p"
            0x00000000,0x0000364C,0x8484844C,0x34040E00 ,//"q"
            0x00000000,0x00006C30,0x20202020,0x20700000 ,//"r"
            0x00000000,0x00007888,0x84601884,0x44780000 ,//"s"
            0x00000020,0x2020F820,0x20202020,0x24180000 ,//"t"
            0x00000000,0x0000C642,0x42424242,0x463A0000 ,//"u"
            0x00000000,0x0000EE44,0x44282828,0x10100000 ,//"v"
            0x00000000,0x0000EE44,0x44545428,0x28280000 ,//"w"
            0x00000000,0x0000EE44,0x28101028,0x44EE0000 ,//"x"
            0x00000000,0x0000EE44,0x44282810,0x10A0C000 ,//"y"
            0x00000000,0x00007E44,0x88102042,0x84FC0000 ,//"z"
            0x000C1010,0x10101060,0x10101010,0x10100C00 ,//"{"
            0x00101010,0x10101010,0x10101010,0x10101000 ,//"|"
            0x00C02020,0x20202018,0x20202020,0x2020C000 ,//"}"
            0x00000000,0x00000072,0x8C000000,0x00000000 //"~"
        ]
        for(n=0;n<chr.length;n++){
            k=chr.charCodeAt(n)
            if(k>32) k-=32
            else k=0
            OLED_Set_Pos(x,y);
            data=0;
            for(i=0;i<8;i++){
                data|=(((asc16[k*4]>>24)&0x000000ff)<<i)&0x80;data>>=1
                data|=(((asc16[k*4]>>16)&0x000000ff)<<i)&0x80;data>>=1
                data|=(((asc16[k*4]>>8)&0x000000ff)<<i)&0x80;data>>=1
                data|=(((asc16[k*4])&0x000000ff)<<i)&0x80;data>>=1
                data|=(((asc16[k*4+1]>>24)&0x000000ff)<<i)&0x80;data>>=1
                data|=(((asc16[k*4+1]>>16)&0x000000ff)<<i)&0x80;data>>=1
                data|=(((asc16[k*4+1]>>8)&0x000000ff)<<i)&0x80;data>>=1
                data|=(((asc16[k*4+1])&0x000000ff)<<i)&0x80;
                OLED_WR_Byte(data,OLED_DATA);
				data=0;
            }
            OLED_Set_Pos(x,y+1);
            for(i=0;i<8;i++){
                data|=(((asc16[k*4+2]>>24)&0x000000ff)<<i)&0x80;data>>=1
                data|=(((asc16[k*4+2]>>16)&0x000000ff)<<i)&0x80;data>>=1
                data|=(((asc16[k*4+2]>>8)&0x000000ff)<<i)&0x80;data>>=1
                data|=(((asc16[k*4+2])&0x000000ff)<<i)&0x80;data>>=1
                data|=(((asc16[k*4+3]>>24)&0x000000ff)<<i)&0x80;data>>=1
                data|=(((asc16[k*4+3]>>16)&0x000000ff)<<i)&0x80;data>>=1
                data|=(((asc16[k*4+3]>>8)&0x000000ff)<<i)&0x80;data>>=1
                data|=(((asc16[k*4+3])&0x000000ff)<<i)&0x80;
                OLED_WR_Byte(data,OLED_DATA);
				data=0;
            }
            x+=8;
        }
    }

    
    /**
     * 
     * @param index
    */
    //% blockId=HuLuMaoGame1_OLED_ShowNum block="在 x=|%x,y=|%y处显示数字|%dat"
    //% weight=145
    //% blockGap=10
    //% color="#cc33ff"
    //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
    export function OLED_ShowNum(x:number,y:number,dat:number){
        OLED_ShowChar(x,y,dat.toString())
    }

       /**
     * 
     * @param index
    */
    //% blockId=HuLuMaoGame1_OLED_Showchine block="在 x=|%x,y=|%y处显示中文|%dat"
    //% weight=144
    //% blockGap=10
    //% color="#cc33ff"
    //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
    export function OLED_Showchine(x:number,y:number,dat:dispaly_c){
        let t,addr;
        OLED_Set_Pos(x,y);
        for(t=0;t<16;t++)
		{
		    OLED_WR_Byte(Hzk[2*dat][t],OLED_DATA);
        }	
		OLED_Set_Pos(x,y+1);	
        for(t=0;t<16;t++)
		{	
			OLED_WR_Byte(Hzk[2*dat+1][t],OLED_DATA);
        }			
    }
}











//% color="#ff0000" weight=47 icon="\uf1b0" block="呼噜猫游戏机按键与逻辑"
namespace HuLuMaoexpanding_Key{
    export enum key_number{
        //% blockId="_0" block="0"
        _0=0,
        //% blockId="_1" block="1"
        _1=1,
        //% blockId="_2" block="2"
        _2,
        //% blockId="_3" block="3"
        _3,
        //% blockId="_4" block="4"
        _4,
        //% blockId="_5" block="5"
        _5,
        //% blockId="_6" block="6"
        _6,
        //% blockId="_7" block="7"
        _7,
        //% blockId="_8" block="8"
        _8,
        //% blockId="_9" block="9"
        _9,
        //% blockId="_F1" block="F1"
        _F1,
        //% blockId="_F2" block="F2"
        _F2,
        //% blockId="_F3" block="F3"
        _F3,
        //% blockId="_F4" block="F4"
        _F4,
        //% blockId="_F5" block="F5"
        _F5,
        //% blockId="_F6" block="F6"
        _F6,
        //% blockId="_F7" block="F7"
        _F7,
        //% blockId="_F8" block="F8"
        _F8,
        //% blockId="_F9" block="F9"
        _F9,
        //% blockId="_F10" block="F10"
        _F10,
    }


    export enum YuHuo{
        //% blockId="yu" block="与"
        yu = 1,
        //% blockId="huo" block="或"
        huo,
    }
    export enum move{
        //% blockId="zuo" block="左移"
        zuo = 1,
        //% blockId="you" block="右移"
        you,
    }

     /**
     * 判断指定按键是否按下
     * @param index
    */
    //% blockId=HuLuMaoexpanding_Key_Key block="当按键|%index被按下,支持连按，触发间隔|%time ms"
    //% weight=99
    //% blockGap=10
    //% color="#ff0000"
    //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
    export function Key(index:key_number,time:number): boolean {
        let data;
        data = pins.analogReadPin(AnalogPin.P0);
         if(data>=1000) data=-1;
         else
         {
            basic.pause(10);
            data = pins.analogReadPin(AnalogPin.P0);
            if (data<20) data=0;
            else if ((20<=data)&&(data<75)) data=1;
            else if ((75<=data)&&(data<130)) data=2;
            else if ((130<=data)&&(data<180)) data=3;
            else if ((180<=data)&&(data<235)) data=4;
            else if ((235<=data)&&(data<287)) data=5;
            else if ((287<=data)&&(data<333)) data=6;
            else if ((333<=data)&&(data<385)) data=7;
            else if ((385<=data)&&(data<435)) data=8;
            else if ((435<=data)&&(data<486)) data=9;
            else if ((486<=data)&&(data<536)) data=10;
            else if ((536<=data)&&(data<589)) data=11;
            else if ((589<=data)&&(data<640)) data=12;
            else if ((640<=data)&&(data<691)) data=13;
            else if ((691<=data)&&(data<742)) data=14;
            else if ((742<=data)&&(data<792)) data=15;
            else if ((792<=data)&&(data<844)) data=16;
            else if ((844<=data)&&(data<896)) data=17;
            else if ((896<=data)&&(data<946)) data=18;
            else if ((946<=data)&&(data<1000)) data=19;
            else data=-1;
            basic.pause(time)
         }
        if(data==index)
            return true
        else 
            return false
        
    }
    /**
     * 获取当前按键值
     * @param index
    */
    //% blockId=HuLuMaoexpanding_Key_Key_get block="获取当前按键值,有按键按下将会获取到当前按键数字，没有则获取到-1"
    //% weight=98
    //% blockGap=10
    //% color="#ff0000"
    //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
    export function Key_get(): number {
        let data;
        // let temp: boolean = false;
        data = pins.analogReadPin(AnalogPin.P0);
         if(data>=1000) data=-1;
         else
         {
            basic.pause(10);
            data = pins.analogReadPin(AnalogPin.P0);
            if (data<20) data=0;
            else if ((20<=data)&&(data<75)) data=1;
            else if ((75<=data)&&(data<130)) data=2;
            else if ((130<=data)&&(data<180)) data=3;
            else if ((180<=data)&&(data<235)) data=4;
            else if ((235<=data)&&(data<287)) data=5;
            else if ((287<=data)&&(data<333)) data=6;
            else if ((333<=data)&&(data<385)) data=7;
            else if ((385<=data)&&(data<435)) data=8;
            else if ((435<=data)&&(data<486)) data=9;
            else if ((486<=data)&&(data<536)) data=10;
            else if ((536<=data)&&(data<589)) data=11;
            else if ((589<=data)&&(data<640)) data=12;
            else if ((640<=data)&&(data<691)) data=13;
            else if ((691<=data)&&(data<742)) data=14;
            else if ((742<=data)&&(data<792)) data=15;
            else if ((792<=data)&&(data<844)) data=16;
            else if ((844<=data)&&(data<896)) data=17;
            else if ((896<=data)&&(data<946)) data=18;
            else if ((946<=data)&&(data<1000)) data=19;
            else data=-1;
            while(pins.analogReadPin(AnalogPin.P0)<1000){
            }
         }
         
         return data;
       //  return temp;
    }

        /**
     * 
     * @param index
    */
    //% blockId=HuLuMaoexpanding_Key_logic1 block="将|%index和|%index1进行按位|%index2"
    //% weight=97
    //% blockGap=10
    //% index.min=0 index.max=255
    //% index1.min=0 index1.max=255
    //% color="#ff0000"
    //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
    export function logic1(index:number,index1:number,index2:YuHuo): number {
        let length;
        switch(index2){
            case YuHuo.yu:length=(index&index1);break;
            case YuHuo.huo:length=(index|index1);break;
        }
        return length;
    }

        /**
     * 
     * @param index
    */
    //% blockId=HuLuMaoexpanding_Key_logic2 block="将|%index进行按位取反"
    //% weight=96
    //% blockGap=10
    //% index.min=0 index.max=255
    //% color="#ff0000"
    //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
    export function logic2(index:number): number {
        let length;
        length=(~index);
        return length;
    }

        /**
     * 
     * @param index
    */
    //% blockId=HuLuMaoexpanding_Key_logic3 block="将|%index进行|%index1 |%index2"
    //% weight=95
    //% blockGap=10
    //% index.min=0 index.max=255
    //% index2.min=0 index2.max=255
    //% color="#ff0000"
    //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
    export function logic3(index:number,index1:move,index2:number): number {
        let length;
        switch(index1){
            case move.zuo:length=index<<index2;break;
            case move.you:length=index>>index2;break;
        }
        return length;
    }

    /**
     * 
     * @param index
    */
    //% blockId=HuLuMaoexpanding_Key_math1 block="运算|%index的|%index1次方"
    //% weight=98
    //% blockGap=10
    //% color="#ff0000"
    //% name.fieldEditor="gridpicker" name.fieldOptions.columns=10
    export function math1(index:number,index1:number): number {
        let length;
        length=Math.pow(index,index1);
        return length;
    }
}